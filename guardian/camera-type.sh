#!/usr/bin/env bash

ips=($(./manage.py units | grep '>' | awk -F'[\\[\\]]' '{print $2}'))

for ip in "${ips[@]}"; do
    out=$(curl -s "${ip}")
    if echo "${out}" | grep 'index.htm' &> /dev/null
    then
        echo "${ip} Geovision"
    elif echo "${out}" | grep 'seajs' &> /dev/null
    then
        echo "${ip} Amcrest"
    else
        echo "${ip} Unknown"
    fi
done

# guardian-1.yakima.hgate.safely-you.com
# pwd: Lg6bDgxIkNJc5ZaM
# NSLocalUnit AC:1F:6B:F6:8D:4B:
#   - Ip address: 10.1.140.30
#   - Status    : ALIVE
#   - Last pulse: 16/11/2021 23:16:02
#   - Run AI    : True
#   - Sensors   : [
#     > 50:13:95:A2:78:35 [10.1.140.68]
#     > 50:13:95:A2:78:73 [10.1.140.59]
#     > 50:13:95:A2:78:75 [10.1.140.55]
#     > 50:13:95:A2:7F:1B [10.1.140.65]
#     > 50:13:95:A2:7F:5E [10.1.140.56]
#     > 60:23:A4:BD:B9:57 [10.1.140.63]
#     > 60:23:A4:BD:B9:62 [10.1.140.52]
#     > 60:23:A4:BD:B9:64 [10.1.140.61]
#     > 60:23:A4:BD:B9:71 [10.1.140.57]
#     > 60:23:A4:BD:B9:89 [10.1.140.53]
#     > 60:23:A4:BD:BA:26 [10.1.140.60]
#     > 60:23:A4:BD:BA:30 [10.1.140.67]
#     > 60:23:A4:BD:BA:49 [10.1.140.62]
#     > 60:23:A4:BD:BA:8C [10.1.140.54]]

# Eskaton Roseville
# guardian-1.evr.eskaton.safely-you.com
# 60:23:A4:BD:B9:52 10.1.114.72
# 60:23:A4:BD:B9:63 10.1.114.73
# 60:23:A4:BD:BA:0B 10.1.114.74
# 60:23:A4:BD:BA:3B 10.1.114.70

# NSLocalUnit AC:1F:6B:AD:AD:C5:
#   - Ip address: 10.1.114.30
#   - Status    : ALIVE
#   - Last pulse: 16/11/2021 20:35:03
#   - Run AI    : True
#   - Sensors   : [
#     > 00:13:E2:1C:5F:AB [10.1.114.65]
#     > 00:13:E2:1C:61:1F [10.1.114.54]
#     > 00:13:E2:1C:61:29 [10.1.114.61]
#     > 00:13:E2:1C:61:DE [10.1.114.51]
#     > 00:13:E2:1C:62:A6 [10.1.114.56]
#     > 00:13:E2:1C:65:58 [10.1.114.42]
#     > 00:13:E2:1C:65:5E [10.1.114.53]
#     > 00:13:E2:1C:65:65 [10.1.114.40]
#     > 00:13:E2:1C:65:69 [10.1.114.44]
#     > 00:13:E2:1C:65:93 [10.1.114.60]
#     > 00:13:E2:1C:65:A2 [10.1.114.50]
#     > 00:13:E2:1C:65:B0 [10.1.114.55]
#     > 00:13:E2:1C:65:B6 [10.1.114.48]
#     > 00:13:E2:1C:B0:8C [10.1.114.59]
#     > 00:13:E2:1C:B0:9E [10.1.114.45]
#     > 00:13:E2:1C:B0:A5 [10.1.114.41]
#     > 00:13:E2:1C:B0:AC [10.1.114.63]
#     > 00:13:E2:1C:B0:F4 [10.1.114.57]
#     > 00:13:E2:1C:B1:70 [10.1.114.52]
#     > 00:13:E2:1C:B1:78 [10.1.114.49]
#     > 00:13:E2:1C:B1:79 [10.1.114.62]
#     > 00:13:E2:1C:B1:7A [10.1.114.58]
#     > 00:13:E2:1C:B2:8B [10.1.114.43]
#     > 00:13:E2:1C:B3:37 [10.1.114.47]
#     > 60:23:A4:BD:B9:52 [10.1.114.72]
#     > 60:23:A4:BD:B9:63 [10.1.114.73]
#     > 60:23:A4:BD:BA:0B [10.1.114.74]
#     > 60:23:A4:BD:BA:3B [10.1.114.70]]
# 10.1.114.65 Geovision
# 10.1.114.54 Geovision
# 10.1.114.61 Geovision
# 10.1.114.51 Geovision
# 10.1.114.56 Geovision
# 10.1.114.42 Geovision
# 10.1.114.53 Geovision
# 10.1.114.40 Geovision
# 10.1.114.44 Geovision
# 10.1.114.60 Geovision
# 10.1.114.50 Geovision
# 10.1.114.55 Geovision
# 10.1.114.48 Geovision
# 10.1.114.59 Geovision
# 10.1.114.45 Geovision
# 10.1.114.41 Geovision
# 10.1.114.63 Geovision
# 10.1.114.57 Geovision
# 10.1.114.52 Geovision
# 10.1.114.49 Geovision
# 10.1.114.62 Geovision
# 10.1.114.58 Geovision
# 10.1.114.43 Geovision
# 10.1.114.47 Geovision
# 10.1.114.72 Amcrest
# 10.1.114.73 Amcrest
# 10.1.114.74 Amcrest
# 10.1.114.70 Amcrest

# Trousdale
# guardian-2.trousdale.eskaton.safely-you.com
# pwd: F7vwhnL4WsCoC68U
# 10.1.125.117 50:13:95:A2:78:72
# 10.1.125.112 60:23:A4:BD:B9:E1

# NSLocalUnit AC:1F:6B:F6:65:2D:
#   - Ip address: 10.1.125.30
#   - Status    : ALIVE
#   - Last pulse: 16/11/2021 20:34:03
#   - Run AI    : True
#   - Sensors   : [
#     > 00:13:E2:27:0F:A9 [10.1.125.71]
#     > 00:13:E2:27:0F:B5 [10.1.125.46]
#     > 00:13:E2:27:0F:CF [10.1.125.68]
#     > 00:13:E2:27:0F:F1 [10.1.125.52]
#     > 00:13:E2:27:10:51 [10.1.125.53]
#     > 00:13:E2:27:14:F3 [10.1.125.42]
#     > 00:13:E2:27:15:2D [10.1.125.44]
#     > 00:13:E2:27:15:4B [10.1.125.45]
#     > 00:13:E2:27:15:53 [10.1.125.54]
#     > 00:13:E2:27:16:86 [10.1.125.65]
#     > 00:13:E2:27:16:9D [10.1.125.57]
#     > 00:13:E2:27:17:AA [10.1.125.70]
#     > 00:13:E2:27:17:BD [10.1.125.50]
#     > 00:13:E2:27:17:D4 [10.1.125.63]
#     > 00:13:E2:27:17:D6 [10.1.125.67]
#     > 00:13:E2:27:17:EC [10.1.125.69]
#     > 00:13:E2:27:17:F6 [10.1.125.60]
#     > 00:13:E2:27:17:FF [10.1.125.56]
#     > 00:13:E2:27:18:08 [10.1.125.61]
#     > 00:13:E2:27:18:10 [10.1.125.55]
#     > 00:13:E2:27:18:14 [10.1.125.51]
#     > 00:13:E2:27:18:1F [10.1.125.62]
#     > 00:13:E2:27:18:23 [10.1.125.48]
#     > 00:13:E2:27:18:2F [10.1.125.66]
#     > 00:13:E2:27:18:35 [10.1.125.64]
#     > 00:13:E2:27:18:CD [10.1.125.40]
#     > 00:13:E2:27:18:DA [10.1.125.58]
#     > 00:13:E2:27:18:EA [10.1.125.49]
#     > 00:13:E2:27:18:F9 [10.1.125.59]
#     > 00:13:E2:27:19:12 [10.1.125.41]
#     > 00:13:E2:27:1A:1E [10.1.125.47]
#     > 50:13:95:A2:78:72 [10.1.125.117]
#     > 60:23:A4:BD:B9:E1 [10.1.125.112]]
# 10.1.125.71 Geovision
# 10.1.125.46 Geovision
# 10.1.125.68 Geovision
# 10.1.125.52 Geovision
# 10.1.125.53 Geovision
# 10.1.125.42 Geovision
# 10.1.125.44 Geovision
# 10.1.125.45 Geovision
# 10.1.125.54 Geovision
# 10.1.125.65 Geovision
# 10.1.125.57 Geovision
# 10.1.125.70 Geovision
# 10.1.125.50 Geovision
# 10.1.125.63 Geovision
# 10.1.125.67 Geovision
# 10.1.125.69 Geovision
# 10.1.125.60 Geovision
# 10.1.125.56 Geovision
# 10.1.125.61 Geovision
# 10.1.125.55 Geovision
# 10.1.125.51 Geovision
# 10.1.125.62 Geovision
# 10.1.125.48 Geovision
# 10.1.125.66 Geovision
# 10.1.125.64 Geovision
# 10.1.125.40 Geovision
# 10.1.125.58 Geovision
# 10.1.125.49 Geovision
# 10.1.125.59 Geovision
# 10.1.125.41 Geovision
# 10.1.125.47 Geovision
# 10.1.125.117 Amcrest
# 10.1.125.112 Amcrest

# Granite Bay
# router.elgb.eskaton.safely-you.com
# 60:23:A4:BD:B9:F3 10.1.144.93
# 60:23:A4:BD:BA:BD 10.1.144.96
# 60:23:A4:BD:BA:D7 10.1.144.97

# NSLocalUnit AC:1F:6B:F6:4B:A3:
#   - Ip address: 10.1.144.30
#   - Status    : ALIVE
#   - Last pulse: 16/11/2021 20:33:05
#   - Run AI    : True
#   - Sensors   : [
#     > 60:23:A4:BD:B9:F3 [10.1.144.93]
#     > 60:23:A4:BD:BA:BD [10.1.144.96]
#     > 60:23:A4:BD:BA:D7 [10.1.144.97]]

# 10.1.144.93 Amcrest
# 10.1.144.96 Amcrest
# 10.1.144.97 Amcrest


11/16
1b
5e
30

11/14
1b
5e
89
30
